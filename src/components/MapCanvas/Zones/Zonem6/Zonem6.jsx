import { useMemo } from 'react';
import { getNextNYLocalForUtcOffset } from '@/utils/ny-time';
import clsx from 'clsx';

import Beliz from './Beliz';
import Mexico from './Mexico';
import Canada from './Canada';
import ElSalvador from './ElSalvador';
import Guatemala from './Guatemala';
import CostaRica from './CostaRica';
import Niceragua from './Niceragua';
import Honduras from './Honduras';
import USA from './USA';
import Gapapagos from './Gapapagos';

import { useIsZoneEndedById } from '@/hooks/useIsZoneEndedById';

export default function Zone({ onZoneClick }) {
  const ZONE_ID = 'UTC-6';
  const ny = useMemo(() => getNextNYLocalForUtcOffset(ZONE_ID), []);

  const zoneEnded = useIsZoneEndedById(ZONE_ID);

  const handleZoneClick = () => {
    onZoneClick?.(ZONE_ID); // клік по фону зони
  };

  return (
    <g className={clsx('zone', 'blueCtrs', zoneEnded && 'zoneEnd')}>
      <g
        className="zoneM"
        data-tt="1"
        data-id={ZONE_ID}
        data-flags="BZ, MX, CA, SV, GT, CR, NI, HN, US, EC"
        data-label={ZONE_ID}
        data-time={ny.display}
        onClick={handleZoneClick}
      >
        <path
          d="M422.5 28.5V0H349V58L326.5 58.3036V131L329.5 133L333.5 132.5L354 138L358 144H368L390.5 168.154V187.5H326V242.5H287V287.5L287.5 288H288.5L289 289L290 289.5H291L292 290.5L292.5 291.5L292 292V293L291.5 292.5L290.5 292L290 293.5L289 294H286.5V318H316V324L317 325L318 327H319.5L321.5 326.5L323 327L323.5 327.5L324.5 326.5L326.5 327.5L328 327L329 327.5L330 329H331L332 332L333 332.5L333.5 333.5L333 334H332L331.5 334.5L330 335.5L329.5 336V337H333.5L334 337.5L334.5 338.5L334 339.5L334.5 340V341V342.5L334 343V344L333 344.5V345L333.5 346L334.5 346.5L333 348H331V349L330.5 350L330 350.5V355H332L332.5 360L332 362L330 362.5L329.5 363L330.5 368L329.5 372.5L326 373L326.5 375H329L329.5 376L328.5 381V385.5L326 386V390H321.5L321 418H312L311.5 425.5L314 431L320.5 434.5L317 440V441L318 446L317.5 446.5H315.5L313.5 448.5L312.5 448L310 447.5L308.5 446.5H307L306 446L305.5 447L305 448L304 450L303.5 451L301.5 452.5L301 454.5L301.5 456L303 457.5L304 459.5L305 459L306 459.5L308 464.5L311.5 466.5V468.5L313 468V468.5L314.5 469.5V471L316 472.5L315.5 474L316.5 474.5L316 475.5L315 476V478L312.5 476.5L310.5 477L310 478.5L308 479.5L310.5 483.5L312 485L315.5 487L318 488.5L319 490.5L325.5 492H326.5L331 495.5L338.5 498.5L342.5 499.5L343.5 500.5L347 502L348.5 502.5V912.5L421.5 912V543L421 542L420 540.5L421 539L420.5 538.5L421.5 537.5L420.5 537L421 534.5H422.793V491.5H396L395 490L394 489.5H393L391.5 492H390.5L390 492.5V485.5L389 484L393 480.5L395 480L395.5 479.5H396.5L398 476.5L397.5 476L398 472.352H405.5V464H423V444L421 440L422 436L421.5 433.5L418.5 431.5V430.5L416 429L415 428.5L412 429.5L410.5 430.5L410 428.5L411 425L410 422.5V417.5L411 416.5L409.5 413.5L407.5 401.5L408.5 401L409.5 398.5L411.5 396.5L411 394.5L412 393.5V392L412.5 391L409.5 388.5L408.5 389L407.5 387.5H405.5L404.5 387V385.5L403 384L402 385L400 383V381.5H397L398 380L397 378L398 376L398.5 368.5L400 368L401 365L402.5 364V362.5H401.5L399.5 360.743V352L403.5 342L402 340.5H400.5L399.5 339.5L398.5 336.5H397.5L397 335H395L394.5 334H391.5L390.5 334.5H389L388.5 333.5H387L386.5 332.5V328.5L388 324H386V322.5L381 321V318.5L380.5 318V316.5L385.5 314.5V306.5L383.5 305L382 303V301.5L383 300.5L385.5 298.5V293.5H390.5V292L393 289.5V287.5L390.5 285H385.5V270.5L390 265.5V224L405.5 196.5L410.5 194V31.5H416L422.5 28.5Z"
          fill="#D9D9D9"
          fillOpacity="0.01"
        />
      </g>
      <Beliz ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <Mexico ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <Canada ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <ElSalvador ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <Guatemala ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <CostaRica ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <Niceragua ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <Honduras ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <USA ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <Gapapagos ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
    </g>
  );
}
