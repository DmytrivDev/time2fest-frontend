import { useMemo } from 'react';
import { getNextNYLocalForUtcOffset } from '@/utils/ny-time';
import clsx from 'clsx';

import Jamaica from './Jamaica';
import Cuba from './Cuba';
import Peru from './Peru';
import Panama from './Panama';
import Bahamas from './Bahamas';
import Haiti from './Haiti';
import Canada from './Canada';
import CaymanIslands from './CaymanIslands';
import TurksAndCaicos from './TurksAndCaicos';
import EasterIsland from './EasterIsland';
import Mexico from './Mexico';
import Columbia from './Columbia';
import Brazil from './Brazil';
import Equador from './Equador';
import USA from './USA';

import { useIsZoneEndedById } from '@/hooks/useIsZoneEndedById';

export default function Zone({ onZoneClick }) {
  const ZONE_ID = 'UTC-5';
  const ny = useMemo(() => getNextNYLocalForUtcOffset(ZONE_ID), []);

  const zoneEnded = useIsZoneEndedById(ZONE_ID);

  const handleZoneClick = () => {
    onZoneClick?.(ZONE_ID); // клік по фону зони
  };

  return (
    <g className={clsx('zone', 'redCtrs', zoneEnded && 'zoneEnd')}>
      <g
        className="zoneM"
        data-tt="1"
        data-id={ZONE_ID}
        data-flags="JM, CU, PE, PA, BS, HT, CA, KY, TC, CL, MX, CO, BR, EC, US"
        data-label={ZONE_ID}
        data-time={ny.display}
        onClick={handleZoneClick}
      >
        <path
          d="M497 27V0H423V28L416.118 31.7506H410.5V193L410 194L406 196L390 224V265L385.5 270.5V285H390.5L393 287.5V289L390.5 291.5V293.5H385.5V298.5L383 300L382 301.5V303L383.5 305L385.5 306.5V314.5L380.5 316.5V317.5L381 318V321L386 322.5V324L388 324.5L386.5 328.5V332.5L387 333.5H388.5L389 334.5H390L391 334H394.5L395 335H397.5V336.5L398.5 337L399 339.5L400.5 340.5H402L403.5 342L399.5 352.059V361L401 362.5H402.5V364L401 365L400 368L398.5 368.5L398 376L397 378L398 380L397 381.5L399.5 381L400 382L400.5 383L401.5 385H402.5L403 384.5L404 385.5V386.5L405 387.5H406H407.5L409 388.5L410 389L412 391V392V393.5L411 394.5L411.5 396V396.5L410 398L408.5 400.5L407.5 401.5L409.5 413L410 415L411 416.5L410 417.5V419V422L411 425L410 428V429L411 430.5L412 429.5L414.5 428.5H415.5L417 429.5L418 430.5L418.5 431.5L421.5 433.5L422 436L421 440L422.743 444.291V464H405.5V472.5H398L397.5 476V477L396.5 479.5H395.5L395 480L393 480.5L389 484L390 485.5V492H391.5L392.5 490L393.5 489.5H395L396 491.5H423V533.5L422.5 534L421 534.5L420.5 537L421.5 537.5L421 538.5V539.5L420 541L421.5 542.94V912H497V892.5L495 891.5L491.5 888.5L487.5 889L486 888L484.5 887.5L482 886.5L480 885.5H478L475 884L474 883L470 879.5L468 880.5L467.5 880L467 876.5L466.5 876H465.5L461 870.5L460.5 867.5L458 863L459 860.5L458 857.5L456.5 856.5L457.5 855.5V854L456.5 851.5L456 845.5L457 839.5L456 831L460.5 812L462.5 810.5L463.5 808V804L464.5 801.5L465.5 800L465 797L466 791L468 790.5L468.5 787L467.5 782.5V779.5L466.5 778V775.5L467 774.5H469V772.5L469.5 772L471 768L472 767L471.5 766L474 762.5L475.5 756.5L476.5 755.5L476 752L477.5 750V749L476.5 737L477.5 736.5L478.5 735V732L477.5 731V729L478 728L479 724L480.5 722.5L480 720L481.5 713.5L481 712.5L482 710L482.5 708L482 706.5V700.5L481.5 700L482 698L483 697.5L484.5 689.5L482.5 673.5C483.333 673.167 485.1 672.5 485.5 672.5C485.9 672.5 485.667 671.167 485.5 670.5L487 669.5L486.5 668.5L490.5 663.5L490 663L489 662.5H488.5L487.5 659.5L489 657.5L488.5 657L488 655.5L490.5 652.5L489 650L490 647L491.5 644.5L487 636.5L492 637L493.5 636L496 635L501 631.5L485 603L487.5 587.5L486.5 584.5L484.5 582.5V579L487.5 578.5H489L488.5 577L485.5 576.5V573.5H494L493 572.5L493.5 572L495 573L497.5 572L499 573.5V576H500.5L498 569.5L496.5 568H495.5L498 565L496.5 563.5L495 559L495.5 555.5L497.5 552.5L497 551L495.5 550.5L487.5 551.5L484 547.5L481 546.5L479.5 547H475L474 545.5L473 545L472.5 544L473 541L471 536.5H470L469.5 536H468L469.5 534L470 530.5L472 527L473.5 526.5L475 524L481 522.5L480 520L479.5 519.5L476 519V492L476.5 490.5L475 489L475.5 488.5L476 488L475.5 487.5L476 486.5L476.5 485.5L476 484.5V484L475.5 482H497V347.5L499.5 344L498.5 342L497.5 341.5L497 340L497.5 339.5L495.5 338.5V330L493.5 328.5H493L490 329L489.5 328.5L492.5 327.5V324.5H493.5H494.5H496.5L497.5 325H499.5L500 324.5L503.5 324L507.5 324.5L516.5 322L517.5 321L526 318L528 316.5L526 310.5L526.5 310L526 309.5V308.5V306.5V306L526.5 305V304L526 304.5L525.5 303V302.5V302L525 301L524.5 300L524 299.5V299L523.5 298.5H516.5H515.5L516 298V297L515.5 296L514.5 295L515 294.5L516 294H517.5L516.5 293.5V292.5L515.5 293L515 293.5H513.5V294V295.5L514 297L513 298.5V299L512.5 300.5L511.5 301L511 300H510H509L508.5 299.5L507 298.5L506 298H505L504 297.5L503 296.5L502.5 297.5V296.5L502 295.5V294.5L502.5 293L503 292L502 291.5L501 292V293.5H500H499V292.5H498L497.5 292V291L498.5 290.5H499.5L500 289.5L499 289L498.5 288H497.5V286.5L496 284.5L497 283.5L496.5 281.5L497 281L498 281.5L499.5 280.5L498 280V278L500.5 279.5H501.5L501 276L503 278L505 278.5L506 280H512.5L516 281L517 278L516.5 277.5V277L518.5 276V274.5L517 274L515.5 272L517 271L514.5 270.5L515 269.5L514 269L513.5 268.5L515 268L514 266L515.5 262.5H515L515.5 260L516 259H515.5L514.5 258.5H514L513.5 257L512.5 256.5L513.5 254.5L515 253.5L514.5 253V252L516.5 251.5L515.5 250.5L513.5 251.5L512.5 250.5L510.5 250V249.5H512L512.5 249L512 247V246L510.5 246.5V244L511 243L509.5 242L511 241.5L510 240.5L512 240L514 238L512 236V234L514 231L512 227L514.5 224L514 220L516 216.5L514 211.5L511.5 210L512.5 206H515L517 206.5L519 205.5L520 204L520.5 202L523.5 200L525.5 197.5L527 196V195L529 193.5L530 191L526 186.5L524 185L519 183.5L517 181.5L514.5 180.5L514 179.5L511 177.5H508.5L503 174.5L502 174H500L499.5 172L501 170.5H503L503.5 169L502.5 167.5L501 166.5L501.5 164.5L501 163L500 161L497 158.768V107.5L491.5 107L483.5 103L480.5 99.5L474.5 96.5L473 94.5L468.5 92.5L468 90.5L469 89.5L472 88.5L469.5 86L466 84.5L465 83L467 80L470.5 76L488.5 67L490 63L493.5 58.5L499.5 54.5L503.5 53.5L514.5 48L516.5 46.5L524 41.5L532.5 37.5L528.5 35L526.5 33H520H519V32L516.5 30L517 29L508.5 29.5H508L503 29L502.5 28L497 27Z"
          fill="#D9D9D9"
          fillOpacity="0.01"
        />
        <path
          d="M312 729.5V708.5L282 708.216V729.5H312Z"
          fill="#D9D9D9"
          fillOpacity="0.01"
        />
      </g>
      <Jamaica ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <Cuba ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <Peru ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <Panama ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <Bahamas ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <Haiti ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <Canada ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <CaymanIslands ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <TurksAndCaicos ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <EasterIsland ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <Mexico ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <Columbia ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <Brazil ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <Equador ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <USA ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
    </g>
  );
}
