import { useMemo } from 'react';
import { getNextNYLocalForUtcOffset } from '@/utils/ny-time';
import clsx from 'clsx';

import Greenland from './Greenland';
import Portugal from './Portugal';
import CaboVerde from './CaboVerde';

import { useIsZoneEndedById } from '@/hooks/useIsZoneEndedById';

export default function Zone({ onZoneClick }) {
  const ZONE_ID = 'UTC-1';
  const ny = useMemo(() => getNextNYLocalForUtcOffset(ZONE_ID), []);

  const zoneEnded = useIsZoneEndedById(ZONE_ID);

  const handleZoneClick = () => {
    onZoneClick?.(ZONE_ID); // клік по фону зони
  };

  return (
    <g className={clsx('zone', 'redCtrs', zoneEnded && 'zoneEnd')}>
      <g
        className="zoneM"
        data-tt="1"
        data-id={ZONE_ID}
        data-flags="GL, PT, CV"
        data-label={ZONE_ID}
        data-time={ny.display}
        onClick={handleZoneClick}
      >
        <path
          d="M794 187.5V1C794 0.447715 793.552 0 793 0H721C720.448 0 720 0.447715 720 1V28.7996C720 29.2201 720.263 29.5957 720.658 29.7394L725.167 31.3788C725.382 31.4572 725.564 31.6074 725.682 31.8041L728.287 36.1448C728.423 36.3722 728.645 36.5361 728.902 36.6005L744.31 40.4525C744.435 40.4839 744.566 40.4906 744.694 40.4723L747.839 40.0229C747.946 40.0077 748.049 39.9755 748.145 39.9274L748.789 39.6056C748.928 39.5361 749.081 39.5 749.236 39.5H757.838C757.945 39.5 758.052 39.5173 758.154 39.5513L759.5 40L772.225 43.426C772.387 43.4697 772.5 43.6167 772.5 43.7845C772.5 43.9178 772.429 44.0408 772.313 44.1069L758.5 52L752.5 56L741.776 64.774C741.598 64.9201 741.374 65 741.143 65H741L736.472 64.5472C736.173 64.5173 735.877 64.623 735.665 64.8351L735.115 65.3853C735.039 65.4613 734.975 65.549 734.927 65.6452L734.516 66.4687C734.243 67.013 734.517 67.6722 735.094 67.8646L742.868 70.4559C742.955 70.4851 743.047 70.5 743.14 70.5C743.615 70.5 744 70.8852 744 71.3604V72.1667C744 72.383 743.93 72.5936 743.8 72.7667L741.326 76.0648C741.123 76.3362 741.071 76.6922 741.188 77.0105L744.343 85.574C744.443 85.8447 744.421 86.1453 744.283 86.3986L741.622 91.2761C741.542 91.423 741.5 91.5877 741.5 91.755V91.9172C741.5 91.9723 741.505 92.0273 741.514 92.0816L741.935 94.6099C741.977 94.8605 741.922 95.1176 741.781 95.329L741.135 96.2976C741.046 96.4306 740.991 96.5829 740.973 96.7418L740.068 104.89C740.026 105.264 739.778 105.583 739.425 105.716L736.087 106.967C736.03 106.989 735.978 107.022 735.934 107.066C735.724 107.276 735.787 107.633 736.058 107.757L741.929 110.467C741.976 110.489 742.022 110.514 742.065 110.543L744.918 112.445C744.972 112.482 745.023 112.523 745.07 112.57L745.563 113.063C745.831 113.331 745.924 113.727 745.805 114.086L745.606 114.682C745.537 114.888 745.403 115.067 745.224 115.19L737.713 120.354C737.573 120.45 737.46 120.579 737.385 120.731L737.17 121.16C737.061 121.379 736.874 121.55 736.647 121.641L734.654 122.439C734.552 122.479 734.458 122.536 734.374 122.608L731.349 125.201C731.128 125.391 731 125.668 731 125.96V126.513C731 126.812 730.832 127.084 730.565 127.218C730.235 127.383 730.064 127.755 730.153 128.113L730.363 128.951C730.448 129.291 730.348 129.652 730.1 129.9L730 130L726.564 132.945C726.521 132.982 726.476 133.014 726.428 133.043L724 134.5L722.757 135.432C722.332 135.751 722.23 136.345 722.525 136.787L722.77 137.155C722.917 137.376 722.971 137.646 722.919 137.906L722.518 139.91C722.506 139.97 722.489 140.029 722.466 140.085L721.659 142.102C721.558 142.356 721.356 142.558 721.102 142.659L719.179 143.428C719.061 143.476 718.935 143.5 718.807 143.5H718.736C718.581 143.5 718.428 143.464 718.289 143.394L711.816 140.158C711.185 139.842 710.434 140.263 710.373 140.966L709.507 150.918C709.502 150.973 709.502 151.027 709.506 151.082L709.946 156.798C709.978 157.219 710.272 157.574 710.679 157.686L713.905 158.57C713.992 158.594 714.08 158.606 714.17 158.606H719.361C719.583 158.606 719.799 158.68 719.974 158.816L721.288 159.836C721.422 159.939 721.5 160.099 721.5 160.268C721.5 160.416 721.44 160.558 721.334 160.661L720.008 161.948C719.813 162.136 719.704 162.395 719.704 162.665V187.5C719.704 188.052 720.151 188.5 720.704 188.5H793C793.552 188.5 794 188.052 794 187.5Z"
          fill="#D9D9D9"
          fillOpacity="0.01"
        />
        <path
          d="M794 255.152V221.5C794 220.948 793.552 220.5 793 220.5H720.762C720.209 220.5 719.762 220.948 719.762 221.5V366.5C719.762 367.052 719.314 367.5 718.762 367.5H673.5C672.948 367.5 672.5 367.948 672.5 368.5V395.5C672.5 396.052 672.948 396.5 673.5 396.5H719C719.552 396.5 720 396.948 720 397.5V486.207C720 486.759 719.552 487.207 719 487.207H698.5C697.948 487.207 697.5 487.654 697.5 488.207V512C697.5 512.552 697.948 513 698.5 513H719C719.552 513 720 513.448 720 514V910.5C720 911.052 720.448 911.5 721 911.5H793C793.552 911.5 794 911.052 794 910.5V561.339C794 560.875 793.625 560.5 793.161 560.5C793.055 560.5 792.949 560.48 792.85 560.44L788.097 558.539C788.032 558.513 787.971 558.481 787.913 558.442L785 556.5L782.5 554.5L780.167 552.167C780.057 552.057 779.923 551.974 779.776 551.925L778.724 551.575C778.577 551.526 778.443 551.443 778.333 551.333L777.559 550.559C777.52 550.52 777.477 550.484 777.433 550.452L774.064 548.046C774.021 548.015 773.977 547.988 773.93 547.965L767.553 544.776C767.214 544.607 767 544.261 767 543.882V543.662C767 543.555 766.983 543.448 766.949 543.346L766.575 542.224C766.526 542.077 766.443 541.943 766.333 541.833L766.129 541.629C766.046 541.546 765.934 541.5 765.818 541.5C765.628 541.5 765.46 541.379 765.4 541.199L765.131 540.393C765.047 540.141 765.067 539.867 765.185 539.63L765.394 539.211C765.464 539.072 765.5 538.919 765.5 538.764V538.236C765.5 538.081 765.464 537.928 765.394 537.789L765 537L764.171 535.342C764.066 535.132 763.852 535 763.618 535C763.277 535 763 534.723 763 534.382V534.232C763 534.081 762.955 533.933 762.871 533.807L762.035 532.553C762.012 532.518 761.985 532.485 761.955 532.455L761.775 532.275C761.623 532.123 761.377 532.123 761.225 532.275C761.094 532.406 760.889 532.426 760.735 532.323L759.666 531.611C759.557 531.538 759.462 531.443 759.389 531.334L758.595 530.143C758.532 530.048 758.454 529.965 758.363 529.897L756.572 528.554C756.524 528.518 756.473 528.487 756.419 528.46L754.807 527.653C754.608 527.554 754.382 527.524 754.164 527.567L752.336 527.933C752.118 527.976 751.892 527.946 751.693 527.847L750.437 527.219C750.161 527.081 749.965 526.823 749.904 526.52L749.651 525.257C749.565 524.824 749.814 524.395 750.232 524.256C750.665 524.112 750.914 523.658 750.804 523.215L750.579 522.317C750.533 522.131 750.365 522 750.173 522C750.062 522 749.956 521.956 749.877 521.877L748.5 520.5L748.293 520.293C748.105 520.105 748 519.851 748 519.586V517.162C748 517.055 747.983 516.948 747.949 516.846L747.742 516.225C747.599 515.797 747.76 515.326 748.136 515.076L748.168 515.055C748.627 514.748 748.752 514.128 748.445 513.668L748.074 513.111C748.025 513.037 747.986 512.957 747.958 512.873L747.551 511.654C747.517 511.552 747.467 511.456 747.403 511.37L746.142 509.689C746.048 509.565 745.928 509.464 745.789 509.394L745.629 509.315C744.924 508.962 744.885 507.969 745.562 507.563L746.294 507.124C746.429 507.042 746.544 506.93 746.627 506.796L748.848 503.243C748.947 503.084 749 502.901 749 502.713V501.644C749 501.548 749.014 501.453 749.041 501.362L751.437 493.214C751.479 493.073 751.488 492.925 751.466 492.78L750.534 486.719C750.511 486.575 750.458 486.437 750.377 486.316L749.737 485.355C749.585 485.128 749.533 484.85 749.593 484.583L750.449 480.73C750.482 480.579 750.48 480.422 750.443 480.271L750.148 479.091C750.061 478.744 749.749 478.5 749.39 478.5C749.145 478.5 748.913 478.384 748.766 478.188L747.752 476.836C747.619 476.659 747.36 476.64 747.203 476.797C746.963 477.037 746.554 476.847 746.583 476.509L746.97 471.865C746.989 471.629 747.092 471.408 747.259 471.241L749.35 469.15C749.449 469.051 749.526 468.933 749.576 468.802L751.947 462.637C751.982 462.547 752 462.45 752 462.353C752 462.128 752.095 461.914 752.262 461.764L756.762 457.714C756.917 457.575 757.024 457.391 757.069 457.188L757.982 453.079C757.994 453.026 758.01 452.975 758.03 452.925L759 450.5L759.386 449.341C759.46 449.121 759.608 448.933 759.805 448.809L763.36 446.588C763.451 446.53 763.526 446.449 763.574 446.352C763.77 445.96 763.485 445.5 763.048 445.5H740.5C739.948 445.5 739.5 445.052 739.5 444.5V413.599C739.5 413.23 739.703 412.891 740.028 412.717L777.472 392.698C777.797 392.524 778 392.185 778 391.816V362.5C778 361.948 778.448 361.5 779 361.5H786.219C786.678 361.5 787.078 361.188 787.189 360.743L787.473 359.607C787.491 359.536 787.516 359.467 787.549 359.402L787.75 359C787.888 358.724 787.776 358.388 787.5 358.25L787.382 358.191C787.171 358.086 787.086 357.829 787.191 357.618C787.333 357.334 787.126 357 786.809 357H786.749C786.593 357 786.448 356.922 786.362 356.793L785.5 355.5L785.414 355.328C785.18 354.861 785.346 354.292 785.794 354.024L787.262 353.143C787.418 353.049 787.596 353 787.777 353H788.338C788.445 353 788.552 352.983 788.654 352.949L789.526 352.658C789.824 352.559 790.059 352.324 790.158 352.026L790.342 351.474C790.441 351.176 790.676 350.941 790.974 350.842L791.665 350.612C791.87 350.543 792.097 350.597 792.25 350.75C792.403 350.903 792.63 350.957 792.835 350.888L793.316 350.728C793.725 350.592 794 350.21 794 349.779V299.351C794 298.686 793.349 298.217 792.718 298.427C792.575 298.475 792.444 298.556 792.337 298.663L791.355 299.645C791.143 299.857 790.819 299.909 790.551 299.775C790.236 299.618 789.854 299.72 789.659 300.012L789.24 300.64C789.087 300.87 788.845 301.026 788.573 301.071L783.205 301.966C783.07 301.988 782.931 301.983 782.798 301.95L781.344 301.586C781.122 301.53 780.925 301.4 780.787 301.216L779.621 299.662C779.541 299.555 779.483 299.433 779.451 299.304L779.02 297.581C779.007 297.527 779 297.472 779 297.417C779 297.161 779.144 296.928 779.373 296.814L780.762 296.119C780.918 296.041 781.051 295.924 781.147 295.779L781.729 294.907C781.9 294.65 781.943 294.329 781.845 294.036L780.131 288.893C780.047 288.641 780.067 288.367 780.185 288.13L780.74 287.019C780.901 286.698 780.877 286.316 780.678 286.017L780.322 285.483C780.123 285.184 780.099 284.802 780.26 284.481L780.815 283.37C780.933 283.133 781.141 282.953 781.393 282.869L782.433 282.522C782.477 282.508 782.521 282.489 782.564 282.468L788.24 279.63C788.41 279.545 788.552 279.413 788.65 279.25L789.709 277.486C789.889 277.184 790.215 277 790.566 277H790.831C790.943 277 791.054 276.981 791.159 276.945L793.328 276.191C793.73 276.051 794 275.672 794 275.247V267.075C794 266.719 793.811 266.39 793.503 266.211L792.497 265.625C792.189 265.446 792 265.117 792 264.761V262.794C792 262.329 791.68 261.925 791.227 261.82L786.328 260.68C785.875 260.575 785.555 260.171 785.555 259.706V257.152C785.555 256.599 786.002 256.152 786.555 256.152H793C793.552 256.152 794 255.704 794 255.152Z"
          fill="#D9D9D9"
          fillOpacity="0.01"
        />
      </g>
      <Greenland ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <Portugal ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
      <CaboVerde ny={ny} utc={ZONE_ID} onClick={onZoneClick} />
    </g>
  );
}
